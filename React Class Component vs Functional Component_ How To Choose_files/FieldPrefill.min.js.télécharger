var Web;(function(n){var t;(function(n){var i=function(){function n(){}return n.prototype.getPrefillerInstance=function(n,t,i){if(n=="emailOptInOut")return new r(t,i)},n}();n.FieldPrefillerFactory=i;var t;(function(n){n[n.Agree=0]="Agree";n[n.Disagree=1]="Disagree";n[n.Customer=2]="Customer"})(t||(t={}));var r=function(){function n(n,t){this.formFields=n;this.formWrapper=t;this.loadHtmlElements()}return n.prototype.prefill=function(n){this.iAgreeCheckBox&&n===this.iAgreeCheckBox.value||this.emptyCheckBox&&n==this.emptyCheckBox.value?(this.shouldSkipPrefillOnCountryChange(!0),this.manageAgreementMessage(!1)):this.iDisagreeCheckBox&&n!=this.iDisagreeCheckBox.value&&(this.shouldSkipPrefillOnCountryChange(!0),this.manageAgreementMessage(!0));this.onEmailAddressChange()},n.prototype.loadHtmlElements=function(){this.iAgreeCheckBox=this.formWrapper.querySelector(".js-i-agree-checkbox");this.emptyCheckBox=this.formWrapper.querySelector(".js-empty-value-check-box");this.iDisagreeCheckBox=this.formWrapper.querySelector(".js-disagree-value-check-box");this.iAgreeHolder=this.formWrapper.querySelector(".js-i-agree-holder");this.iAlreadyAgreedHolder=this.formWrapper.querySelector(".js-already-agreed-holder");this.customerMessageHolder=this.formWrapper.querySelector(".js-customer-message-holder");this.skipPrefillOnCountryChange=this.formWrapper.querySelector('[name="skipPrefillOnCountryChange"]');var n=this.formWrapper.querySelector('[data-sf-role="optinout-data"]');this.countriesUnderGdprLaw=n&&n.value?JSON.parse(n.value):Array()},n.prototype.manageAgreementMessage=function(n){this.iAlreadyAgreedHolder.style.display=n?"none":"block";this.iAgreeHolder.style.display="none";this.customerMessageHolder.style.display=n?"block":"none";this.resetRadioButtonsState(!0)},n.prototype.shouldSkipPrefillOnCountryChange=function(n){this.skipPrefillOnCountryChange&&(this.skipPrefillOnCountryChange.checked=n)},n.prototype.onEmailAddressChange=function(){var n=this,r=this.formFields.filter(function(n){return n.type=="Email"||n.type=="EmailAlternative"});if(r.length!=0){var u=r[0],f=parseInt(this.formFields.filter(function(n){return n.type=="Email Opt-in/out"})[0].value),i=document.querySelectorAll("input[name="+u.htmlName+"]")[0];i&&i.addEventListener("input",function(){if(u.value===i.value){switch(f){case t.Agree:n.showAlreadyAgreedMessage();break;case t.Disagree:n.isCountryUnderGdpr()?n.showIAgreeMessage():n.hideAll();break;case t.Customer:n.showCustomerMessage()}n.shouldSkipPrefillOnCountryChange(!0)}else n.isCountryUnderGdpr()?n.showIAgreeMessage():n.hideAll(),n.shouldSkipPrefillOnCountryChange(!1)},!1)}},n.prototype.isCountryUnderGdpr=function(){var n=this.formWrapper.querySelector(".js-country-field").value;return this.countriesUnderGdprLaw.indexOf(n)>-1},n.prototype.showIAgreeMessage=function(){this.iAgreeHolder.style.display="block";this.iAlreadyAgreedHolder.style.display="none";this.customerMessageHolder.style.display="none";this.resetRadioButtonsState(!1)},n.prototype.showAlreadyAgreedMessage=function(){this.iAlreadyAgreedHolder.style.display="block";this.iAgreeHolder.style.display="none";this.customerMessageHolder.style.display="none";this.resetRadioButtonsState(!0)},n.prototype.showCustomerMessage=function(){this.customerMessageHolder.style.display="block";this.iAgreeHolder.style.display="none";this.iAlreadyAgreedHolder.style.display="none";this.resetRadioButtonsState(!0)},n.prototype.hideAll=function(){this.iAlreadyAgreedHolder.style.display="none";this.iAgreeHolder.style.display="none";this.customerMessageHolder.style.display="none";this.resetRadioButtonsState(!0)},n.prototype.resetRadioButtonsState=function(n){this.emptyCheckBox.checked=n?!0:!1;this.iAgreeCheckBox.checked=!1;this.iDisagreeCheckBox.checked=n?!1:!0},n}()})(t=n.Forms||(n.Forms={}))})(Web||(Web={}))