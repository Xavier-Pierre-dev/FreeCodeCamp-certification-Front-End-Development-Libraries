(function(n){var r=function(n){var t,f,c,i,e,r,u,o,l,a=this,s;t=n;f=t.find(".js-states-drop-down");r=t.find(".js-states-legal-label");r.hide();c=JSON.parse(t.find(".js-state-data").val());e=t.closest('[data-sf-role="form-container"]');l=e.find(".js-link-states-by-value");i=e.find(".js-country-field");var h=function(){r&&r.hide();for(var n=f[0],y=t[0],e=n.options.length-1;e>=0;e--){var p=n.options[e].value;p&&p.length>0&&n.removeChild(n.options[e])}s=l.length>0?o=i.find("option:selected").val():o=i.find("option:selected").text();var h=u=c[s];if(h&&h.length){for(var v=0,b=h.length;v<b;v++){var a=h[v],w=new Option(a.Text,a.Value);a.AlternativeValue&&w.setAttribute("data-alt-val",a.AlternativeValue);n.add(w)}y.style.display="";n.removeAttribute("disabled");var k=t.find(".js-is-state-required").val()==="True";k&&n.setAttribute("required","required")}else y.style.display="none",n.setAttribute("disabled","disabled"),n.removeAttribute("required","required")},v=function(){var i=f.val(),t=null;if(u&&u.length>0)for(var n=0;n<u.length;n++)if(u[n].Value===i){t=u[n];break}r&&(t&&t.UnderLegalRegulation?r.show():r.hide())};if(i.length>0){i.on("change",function(){h(this)});h(i)}if(f)f.on("change",function(){v(this)});window.addEventListener("pageshow",function(){o!=i.val()&&h(a)})},t=n(".js-states-field-container");if(t&&!(t.length<1))for(var i=0;i<t.length;i++)new r(n(t[i]))})(jQuery)