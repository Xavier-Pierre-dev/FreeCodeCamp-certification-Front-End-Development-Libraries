var __awaiter=this&&this.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i;return{next:e(0),"throw":e(1),"return":e(2)};function e(n){return function(t){return o([n,t])}}function o(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=u[e[0]&2?"return":e[0]?"throw":"next"])&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[0,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Web;(function(n){var t;(function(t){var i=function(){function t(n,t,i){this.settings=t;this.mappings=n;this.formFieldManager=i}return t.prototype.getData=function(){return __awaiter(this,void 0,void 0,function(){var e=this,o,v,s,t,h,y,u,i,p,c,w,l,f,r,b,a,k,d;return __generator(this,function(g){switch(g.label){case 0:return g.trys.push([0,3,,4]),[4,n.Common.interactive()];case 1:return g.sent(),[4,this.loadDnBScript()];case 2:return g.sent(),o=[],v=JSON.parse(this.settings.hiddenInputsJson),v.forEach(function(n){return o.push(e.createInput(n))}),o.forEach(function(n){return e.appendChild(e.settings.formWrapperId,n)}),s=this.mappings.find(function(n){return n.providerFieldName=="Country"}),t=s?this.formFieldManager.getHtmlElement(s.htmlName):null,h=this.mappings.find(function(n){return n.providerFieldName=="Email"}),y=h?h.htmlName:"",u=this.mappings.find(function(n){return n.providerFieldName=="Company"}),i=u?u.htmlName:"dnbCompany",u||(p=this.createInput(i),this.appendChild(this.settings.formWrapperId,p)),this.settings.companyWrapperClasses&&(c=this.formFieldManager.getHtmlElement(i),c&&(w=JSON.parse(this.settings.companyWrapperClasses),l=document.createElement("div"),(d=l.classList).add.apply(d,w),this.wrap(c,l))),f="dnbCountry",r=this.createInput(f),this.appendChild(this.settings.formWrapperId,r),b={visitorIntelligenceApiKey:this.settings.visitorIntelligenceApiKey,leadFormName:this.settings.formWrapperId,defaultCompanyCountry:this.settings.defaultCompanyCountry,companyCountrySearchFieldName:f,contactEmailSearchFieldName:y,companyNameSearchFieldName:i,useLIDropdowns:this.settings.useLIDropdowns=="true",initialFocusFieldName:this.settings.initialFocusFieldName,companyNameFieldName:i,countryFieldName:f,countryValueType:this.settings.countryValueType,dunsFieldName:this.settings.dunsFieldName,sicCodeFieldName:this.settings.sicCodeFieldName,sicDescriptionFieldName:this.settings.sicDescriptionFieldName,naicsCodeFieldName:this.settings.naicsCodeFieldName,naicsDescriptionFieldName:this.settings.naicsDescriptionFieldName,revenueFieldName:this.settings.revenueFieldName,employeeSiteCountFieldName:this.settings.employeeSiteCountFieldName,searchCompanyAfterCountryChange:this.settings.searchCompanyAfterCountryChange=="true",visitorIDEnabled:this.settings.visitorIDEnabled=="true",companySelectedCallback:this.dnBCompanySelected.bind(this)},a=new Fill.LeadFormApp(b),a.attach(),t&&t[0]&&(r.value=t.value,t.onchange=function(){r.value!==t.value&&(r.value=t.value,a.config.typeAheadSearchResults={})}),[3,4];case 3:return k=g.sent(),console.error(k),[3,4];case 4:return[2,[]]}})})},t.prototype.dnBCompanySelected=function(n){var t=this.mappings.find(function(n){return n.providerFieldName=="Country"}),i=this.mappings.find(function(n){return n.providerFieldName=="State"}),r=this.mappings.find(function(n){return n.providerFieldName=="Company"});t&&this.formFieldManager.setFieldValue(t.htmlName,n.countryCode==="United States"?"USA":n.countryCode,!0);i&&this.formFieldManager.setFieldValue(i.htmlName,n.state,!0);r&&this.formFieldManager.setFieldValue(r.htmlName,n.companyName,!0)},t.prototype.loadDnBScript=function(){return n.Common.loadResource("https://cdn-0.d41.co/tags/ff-2.min.js","text/javascript")},t.prototype.createInput=function(n,t,i){t===void 0&&(t="text");i===void 0&&(i="display: none");var r=document.createElement("input");return r.type=t,r.setAttribute("style",i),r.name=n,r},t.prototype.appendChild=function(n,t){var i=document.getElementById(n);i&&t&&i.appendChild(t)},t.prototype.wrap=function(n,t){n.parentNode.insertBefore(t,n);t.appendChild(n)},t}();t.DnBPrefillDataProvider=i})(t=n.Forms||(n.Forms={}))})(Web||(Web={}))